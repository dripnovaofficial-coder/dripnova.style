<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>DripNova â€” Checkout</title>
  <link rel="stylesheet" href="style.css">
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
</head>
<body>
  <nav>
    <div class="nav-left"><div class="brand">DripNova</div></div>
    <div class="nav-right"><a href="index.html">Home</a></div>
  </nav>

  <div class="container">
    <h2>Checkout</h2>
    <div id="checkout-summary"></div>

    <form id="payment-form">
      <div class="form-row">
        <label>Name</label>
        <input id="cust-name" class="input" required>
      </div>
      <div class="form-row">
        <label>Phone</label>
        <input id="cust-phone" class="input" required placeholder="+923...">
      </div>
      <div class="form-row">
        <label>Address</label>
        <textarea id="cust-address" class="input" rows="3" required></textarea>
      </div>
      <div class="form-row">
        <label>Payment Method</label>
        <select id="payment-method" class="input">
          <option value="cod">Cash on Delivery</option>
        </select>
      </div>

      <div style="margin-top:12px;display:flex;gap:12px">
        <button type="submit" class="btn">Confirm Order</button>
        <a href="cart.html" class="btn" style="background:#444;color:#fff">Back to Cart</a>
      </div>
    </form>
  </div>

  <script src="script.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      renderCheckoutSummary();

      document.getElementById('payment-form').addEventListener('submit', (e)=>{
        e.preventDefault();
        // collect details and create order
        const name = document.getElementById('cust-name').value.trim();
        const phone = document.getElementById('cust-phone').value.trim();
        const address = document.getElementById('cust-address').value.trim();
        const method = document.getElementById('payment-method').value;

        if(!name || !phone || !address){
          alert('Please fill all details');
          return;
        }

        const cart = JSON.parse(localStorage.getItem('drip_cart')||'[]');
        if(!cart.length){
          alert('Your cart is empty');
          return;
        }

        // create order
        const orderId = createOrder({
          customer: {name, phone, address},
          method,
          items: cart
        });

        // clear cart
        localStorage.removeItem('drip_cart');
        updateCartCount();

        // navigate to thank you
        location.href = `thankyou.html?id=${encodeURIComponent(orderId)}`;
      });
    });
  </script>
</body>
</html>
