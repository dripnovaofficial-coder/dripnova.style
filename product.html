<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Product – Drip Nova</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<div class="container">
  <a href="shop.html">← Back to shop</a>

  <div class="product-wrapper">

    <!-- LEFT: IMAGE SLIDER -->
    <div>
      <div class="slider-container">
        <div id="slider-images"></div>
        <button class="prev-btn">❮</button>
        <button class="next-btn">❯</button>
      </div>
      <div id="thumbnails"></div>
    </div>

    <!-- RIGHT: PRODUCT DETAILS -->
    <div class="product-info">
      <h1 id="product-name"></h1>
      <p id="product-type"></p>
      <p id="product-price"></p>
      <p id="product-sizes"></p>
      <p id="product-colors"></p>

      <div class="selectors">
        <select id="product-color"></select>
        <select id="product-size"></select>
      </div>

      <button id="add-cart-btn" class="add-btn">Add to Cart</button>
    </div>

  </div>
</div>

<script>
// GET product ID from URL
const params = new URLSearchParams(window.location.search);
const productId = params.get("id");

fetch("products.json")
  .then(res => res.json())
  .then(products => {
    const product = products.find(p => p.PRODUCT_ID === productId);
    if (!product) return alert("Product not found");

    // Fill product info
    document.getElementById("product-name").textContent = product.PRODUCT_NAME;
    document.getElementById("product-type").textContent = product.TYPE;
    document.getElementById("product-price").textContent = "PKR " + product.PRICE_PKR;
    document.getElementById("product-sizes").textContent = "Sizes: " + product.SIZE;
    document.getElementById("product-colors").textContent = "Colors: " + product.COLOURS;

    // Populate selects
    const colorSelect = document.getElementById("product-color");
    product.COLOURS.split(",").forEach(c => {
      const option = document.createElement("option");
      option.value = c.trim();
      option.textContent = c.trim();
      colorSelect.appendChild(option);
    });

    const sizeSelect = document.getElementById("product-size");
    product.SIZE.split(",").forEach(s => {
      const option = document.createElement("option");
      option.value = s.trim();
      option.textContent = s.trim();
      sizeSelect.appendChild(option);
    });

    // Setup slider
    const sliderImages = document.getElementById("slider-images");
    product.images.forEach(src => {
      const img = document.createElement("img");
      img.src = src;
      sliderImages.appendChild(img);
    });

    const thumbnails = document.getElementById("thumbnails");
    product.images.forEach((src, index) => {
      const thumb = document.createElement("img");
      thumb.src = src;
      thumb.addEventListener("click", () => showSlide(index));
      thumbnails.appendChild(thumb);
    });

    let currentIndex = 0;
    function showSlide(index) {
      const width = sliderImages.clientWidth;
      sliderImages.style.transform = `translateX(-${index * width}px)`;
      currentIndex = index;
      // Active thumbnail
      thumbnails.querySelectorAll("img").forEach((img, i) => img.classList.toggle("active", i === index));
    }

    // Next/Prev buttons
    document.querySelector(".next-btn").addEventListener("click", () => {
      currentIndex = (currentIndex + 1) % product.images.length;
      showSlide(currentIndex);
    });
    document.querySelector(".prev-btn").addEventListener("click", () => {
      currentIndex = (currentIndex - 1 + product.images.length) % product.images.length;
      showSlide(currentIndex);
    });

    // Show first slide
    showSlide(0);
  })
  .catch(err => console.error("Error loading product:", err));
</script>

</body>
</html>
